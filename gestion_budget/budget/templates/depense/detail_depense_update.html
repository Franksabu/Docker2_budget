{% extends 'layouts/base.html' %}

{% block content %}

<script>
  function calculateTotal(){
    // recuperer la valeur de la quantite 
    const quantite = parseFloat(document.getElementById('id_quantite').value) || 0;
    // recuperer la valeur du prix unitaire
    const prixUnit = parseFloat(document.getElementById('id_prix_unit').value) || 0;

    // calcul du prix total 
    const prixTot = prixUnit * quantite;

    // recuper ou mettre a jour le prix total dans le input 
    document.getElementById('id_prix_tot').value = prixTot.toFixed(2); 
  }
  // ajouter les ecouteurs d'evenement
  document.addEventListener('DOMContentLoaded', function(){
    document.getElementById('id_quantite').addEventListener('input', calculateTotal)
    document.getElementById('id_prix_unit').addEventListener('input', calculateTotal)
  })
</script>
  
<div class="wrapper d-flex flex-column min-vh-100">
  <header class="header header-sticky p-0 mb-4">
    {% include 'includes/navbar.html' %}
    <div class="container-fluid px-4">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-0">
          <li class="breadcrumb-item"><a href="#">Home</a>
          </li>
          <li class="breadcrumb-item"><span>Depenses</span>
          </li>
          <li class="breadcrumb-item"><span>Fomulaire de modification de depense</span>
          </li>
        </ol>
      </nav>
    </div>
  </header>
  <div class="body flex-grow-1">
    <div class="container-lg px-4">
      {% include 'includes/topbar.html' %}
      <div class="row">
        <div class="col-12">
          <form action="{% url 'detail_depense_update' depense_id=depense.id detail_id=detail_depense_instance.id  %}" method="post">
            {% csrf_token %}
            <div class="card mb-4">
              <div class="card-header"><strong>Form control</strong></div>
              <div class="card-body">
                {% include "depense/detail_depense_form.html" %}
              </div>
              <div class="card-footer">
                <button class="btn btn-primary btn-sm" type="submit">Enregistrer</button>
                <a class="btn btn-secondary btn-sm" href="{% url 'detail_depense_list' id=depense.id %}">Annuler</a>
              </div>
            </div>
          </form>       
        </div>
      </div>
    </div>
  </div>
  {% include "includes/footer.html" %}
</div>
{% endblock content %}
  
 