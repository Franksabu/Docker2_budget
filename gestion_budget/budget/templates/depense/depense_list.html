{% extends 'layouts/base.html' %}

{% block content %}
  
<div class="wrapper d-flex flex-column min-vh-100">
  <header class="header header-sticky p-0 mb-4">
    {% include 'includes/navbar.html' %}
    <div class="container-fluid px-4">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-0">
          <li class="breadcrumb-item"><a href="#">Home</a>
          </li>
          <li class="breadcrumb-item"><span>Components</span>
          </li>
          <li class="breadcrumb-item"><span>Base</span>
          </li>
          <li class="breadcrumb-item active"><span>Tables</span>
          </li>
        </ol>
      </nav>
    </div>
  </header>
  <div class="body flex-grow-1">
    <div class="container-fluid px-4">
      {% include 'includes/topbar.html' %}
      <div class="card mb-4">
        <div class="card-header">
          <strong>Tables</strong><span class="small ms-1">Striped rows</span>
          <a href="{% url 'create_depense' %}" class="btn btn-sm btn-primary" style="float: right;">Nouveau depense</a>
        </div>
        <div class="card-body"> 
          <div class="example">
            <ul class="nav nav-underline-border" role="tablist">
              <li class="nav-item"><a class="nav-link active" data-coreui-toggle="tab" href="#preview-1003" role="tab">
                  <svg class="icon me-2">
                    <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-media-play"></use>
                  </svg>Preview</a></li>
              <li class="nav-item"><a class="nav-link" href="https://coreui.io/docs/content/tables/#striped-rows" target="_blank">
                  <svg class="icon me-2">
                    <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-code"></use>
                  </svg>Code</a></li>
            </ul>
            <div class="tab-content rounded-bottom">
              <div class="tab-pane p-3 active preview" role="tabpanel" id="preview-1003">
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th scope="col">No</th>
                      <th scope="col">Nom</th>
                      <th scope="col">Montant</th>
                      <th scope="col">numero</th>
                      <th scope="col">Facture</th>
                      <th scope="col">date de depense</th>
                      <th scope="col">Description</th>
                      <th scope="col">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for row in depenses %}
                    <tr>
                    <th scope="row">{{forloop.counter}}</th>
                      <td>{{row.name}}</td>
                      <td>{{row.montant}}</td>
                      <td>{{row.numero_facture}}</td>
                      <td>
                        {% if row.file_facture %}
                            <a href="{{ row.file_facture.url }}" target="_blank">Télécharger la facture</a>
                        {% else %}
                            Pas de facture
                        {% endif %}
                      </td>
                      <td>{{row.date_depense}}</td>
                      <td>{{row.description}}</td>
                      <td class="d-flex justify-content-start">
                        <a class="btn btn-sm btn-outline-primary mb-2 me-2" href="{% url 'depense_update' row.id %}"><i class="fa fa-check"></i>Modifier</a>
                        <a class="btn btn-sm btn-outline-success mb-2 me-2" href="{% url 'detail_depense_list' row.id %}"><i class="fa fa-check"></i>Detail</a>
                        <a class="btn btn-sm btn-outline-danger mb-2" href="{% url 'depense_delete' row.id %}"><i class="fa fa-check"></i>Supprimer</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td class="text-center" colspan="5">Aucun enregistrement</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>   
        </div>
      </div>
    </div>
  </div>
  {% include "includes/footer.html" %}
</div>
{% endblock content %}
  

    